---
title: Diagrama de arquitectura
---

flowchart TD
    subgraph User["ðŸ‘¤ Usuario (Dev)"]
        UI["Frontend Web\n(Solicita acceso)"]
    end

    subgraph Broker["ðŸ›¡ï¸ Broker de Acceso Temporal"]
        API["API Backend
        (NestJS / Spring Boot)"]
        Core["Core de GestiÃ³n
	        AutenticaciÃ³n
	        Logs
	        Scheduler de ExpiraciÃ³n"]
        Factory["Factory
        (Selecciona estrategia)"]
        StrategyPostgres["Strategy: PostgreSQL
         CREATE ROLE
          DROP ROLE"]
    end

    subgraph Resource["ðŸ’¾ Recurso Protegido"]
        Postgres["PostgreSQL DB
        (Docker/Staging)"]
    end

    UI --> API
    API --> Core
    Core --> Factory
    Factory --> StrategyPostgres
    StrategyPostgres --> Postgres

    subgraph Storage["ðŸ“‚ BD Interna"]
        Logs["Tabla de Logs"]
        Access["Tabla de Accesos Temporales"]
    end

    Core --> Storage
